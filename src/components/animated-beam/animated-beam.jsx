"use client";

import React, { forwardRef, useRef } from "react";
import BeamEffect from "./beam-effect";

export default function AnimatedBeam() {
  const containerRef = useRef(null);
  const div1Ref = useRef(null);
  const div2Ref = useRef(null);
  const div3Ref = useRef(null);
  const div4Ref = useRef(null);
  const div5Ref = useRef(null);
  const div6Ref = useRef(null);
  const div7Ref = useRef(null);
  const div8Ref = useRef(null);
  const div9Ref = useRef(null);

  return (
    <div
      className="relative flex h-[500px] p-6 w-full items-start justify-center overflow-hidden rounded-lg bg-transparent"
      ref={containerRef}
    >
      <div className="flex size-full flex-col max-w-[1000px] max-h-[200px] items-stretch justify-between gap-14">
        <div className="flex flex-row items-center justify-between">
          <Circle ref={div1Ref}>
            <Icons.tailwind />
          </Circle>
          <Circle ref={div8Ref}>
            <Icons.tailwind />
          </Circle>
          <Circle ref={div5Ref}>
            <Icons.github />
          </Circle>
        </div>
        <div className="flex flex-row items-center justify-between">
          <Circle ref={div2Ref}>
            <Icons.figma />
          </Circle>
          <Circle ref={div4Ref}>
            <Icons.TK />
          </Circle>
          <Circle ref={div6Ref}>
            <Icons.react />
          </Circle>
        </div>
        <div className="flex flex-row items-center justify-between">
          <Circle ref={div3Ref}>
            <Icons.next />
          </Circle>
          <Circle ref={div9Ref}>
            <Icons.next />
          </Circle>
          <Circle ref={div7Ref}>
            <Icons.github />
          </Circle>
        </div>
      </div>

      <BeamEffect
        containerRef={containerRef}
        fromRef={div1Ref}
        toRef={div4Ref}
        curvature={-175}
        endYOffset={-10}
      />
      <BeamEffect
        containerRef={containerRef}
        fromRef={div8Ref}
        toRef={div4Ref}
        curvature={-175}
        endYOffset={-10}
      />
      <BeamEffect
        containerRef={containerRef}
        fromRef={div2Ref}
        toRef={div4Ref}
      />
      <BeamEffect
        containerRef={containerRef}
        fromRef={div9Ref}
        toRef={div4Ref}
      />
      <BeamEffect
        containerRef={containerRef}
        fromRef={div3Ref}
        toRef={div4Ref}
        curvature={175}
        endYOffset={10}
      />
      <BeamEffect
        containerRef={containerRef}
        fromRef={div5Ref}
        toRef={div4Ref}
        curvature={-175}
        endYOffset={-10}
        reverse
      />
      <BeamEffect
        containerRef={containerRef}
        fromRef={div6Ref}
        toRef={div4Ref}
        reverse
      />
      <BeamEffect
        containerRef={containerRef}
        fromRef={div7Ref}
        toRef={div4Ref}
        curvature={175}
        endYOffset={10}
        reverse
      />
    </div>
  );
}

const Circle = forwardRef(function Circle({ className, children }, ref) {
  return (
    <div
      ref={ref}
      className={`z-10 flex size-20 md:size-28 items-center justify-center rounded-full border-2 bg-white p-6 shadow-[0_0_20px_-12px_rgba(0,0,0,0.8)] ${className}`}
    >
      {children}
    </div>
  );
});

const Icons = {
  figma: () => (
    <svg 
      width="100" 
      height="100" 
      viewBox="0 0 100 100" 
      fill="none" 
      xmlns="http://www.w3.org/2000/svg"
      >
      <path d="M36.1111 91.6664C43.7777 91.6664 49.9999 85.4442 49.9999 77.7776V63.8887H36.1111C28.4444 63.8887 22.2222 70.1109 22.2222 77.7776C22.2222 85.4442 28.4444 91.6664 36.1111 91.6664Z" fill="#0ACF83"/>
      <path d="M22.2222 50.0002C22.2222 42.3336 28.4444 36.1113 36.1111 36.1113H49.9999V63.8891H36.1111C28.4444 63.8891 22.2222 57.6669 22.2222 50.0002Z" fill="#A259FF"/>
      <path d="M22.2222 22.2224C22.2222 14.5557 28.4444 8.3335 36.1111 8.3335H49.9999V36.1113H36.1111C28.4444 36.1113 22.2222 29.889 22.2222 22.2224Z" fill="#F24E1E"/>
      <path d="M50 8.3335H63.8889C71.5556 8.3335 77.7778 14.5557 77.7778 22.2224C77.7778 29.889 71.5556 36.1113 63.8889 36.1113H50V8.3335Z" fill="#FF7262"/>
      <path d="M77.7778 50.0002C77.7778 57.6669 71.5556 63.8891 63.8889 63.8891C56.2222 63.8891 50 57.6669 50 50.0002C50 42.3336 56.2222 36.1113 63.8889 36.1113C71.5556 36.1113 77.7778 42.3336 77.7778 50.0002Z" fill="#1ABCFE"/>
    </svg>
  ),
  TK: () => (
    <svg 
      width="61" 
      height="35" 
      viewBox="0 0 61 35" 
      fill="none" 
      xmlns="http://www.w3.org/2000/svg"
      >
      <path d="M0.56392 6.17614V0.0909081H29.2344V6.17614H18.5469V35H11.2514V6.17614H0.56392ZM33.956 35V0.0909081H47.7287C50.3764 0.0909081 52.6321 0.59659 54.4957 1.60795C56.3594 2.60795 57.7798 4 58.7571 5.78409C59.7457 7.55682 60.2401 9.60227 60.2401 11.9205C60.2401 14.2386 59.7401 16.2841 58.7401 18.0568C57.7401 19.8295 56.2912 21.2102 54.3935 22.1989C52.5071 23.1875 50.223 23.6818 47.5412 23.6818H38.7628V17.767H46.348C47.7685 17.767 48.9389 17.5227 49.8594 17.0341C50.7912 16.5341 51.4844 15.8466 51.9389 14.9716C52.4048 14.0852 52.6378 13.0682 52.6378 11.9205C52.6378 10.7614 52.4048 9.75 51.9389 8.88636C51.4844 8.01136 50.7912 7.33523 49.8594 6.85795C48.9276 6.36932 47.7457 6.125 46.3139 6.125H41.3366V35H33.956Z" fill="#F9CE69"/>
  </svg>

  ),
  tailwind: () => (
    <svg 
      width="100" 
      height="100" 
      viewBox="0 0 107 107" 
      fill="none" 
      xmlns="http://www.w3.org/2000/svg"
      >
      <path d="M82.4792 42.3986C79.1357 41.2471 76.1844 39.1765 73.9638 36.4245C71.5164 33.3582 68.4001 30.8923 64.8532 29.2154C61.3064 27.5386 57.423 26.6952 53.5001 26.7499C48.223 26.3762 42.9988 28.0038 38.8679 31.3085C34.7369 34.6133 32.0022 39.3528 31.2084 44.5832C32.7718 41.9673 35.1249 39.9147 37.9289 38.721C40.7329 37.5273 43.8433 37.254 46.8126 37.9403C50.1505 39.1254 53.097 41.2079 55.328 43.959C57.7888 47.0008 60.9111 49.4412 64.4572 51.0946C68.0033 52.7479 71.8798 53.5705 75.7917 53.4999C81.0688 53.8736 86.293 52.246 90.424 48.9412C94.555 45.6364 97.2896 40.8969 98.0834 35.6665C96.5484 38.3138 94.2028 40.3973 91.3931 41.6095C88.5833 42.8217 85.4583 43.0984 82.4792 42.3986ZM24.5209 64.6011C27.8644 65.7527 30.8157 67.8232 33.0363 70.5753C35.4837 73.6416 38.6001 76.1075 42.1469 77.7843C45.6938 79.4611 49.5772 80.3045 53.5001 80.2499C58.7771 80.6236 64.0013 78.996 68.1323 75.6912C72.2633 72.3864 74.998 67.6469 75.7917 62.4165C74.2283 65.0325 71.8753 67.085 69.0713 68.2787C66.2673 69.4724 63.1568 69.7458 60.1876 69.0595C56.8497 67.8744 53.9032 65.7918 51.6722 63.0407C49.2047 60.0064 46.0812 57.5714 42.5366 55.9188C38.9921 54.2662 35.1188 53.4391 31.2084 53.4999C25.9314 53.1262 20.7072 54.7538 16.5762 58.0585C12.4452 61.3633 9.71052 66.1028 8.91675 71.3332C10.4518 68.686 12.7973 66.6024 15.6071 65.3902C18.4168 64.178 21.5419 63.9014 24.5209 64.6011Z" fill="#38BDF8"/>
    </svg>
  ),
  framer: () => (
    <svg 
      width="100" 
      height="100" 
      viewBox="0 0 100 100" 
      fill="none" 
      xmlns="http://www.w3.org/2000/svg"
      > 
      <path d="M16.6667 0H83.3334V33.3333H50.0001L16.6667 0ZM16.6667 33.3333H50.0001L83.3334 66.6667H16.6667V33.3333ZM16.6667 66.6667H50.0001V100L16.6667 66.6667Z" fill="black"/>
    </svg>
  ),
  next: () => (
    <svg 
      width="100" 
      height="100" 
      viewBox="0 0 24 24" 
      fill="none" 
      xmlns="http://www.w3.org/2000/svg"
      >
      <g clipPath="url(#clip0_1046_155)">
        <mask id="mask0_1046_155"  maskUnits="userSpaceOnUse" x="0" y="0" width="24" height="24">
          <path d="M24 0H0V24H24V0Z" fill="white"/>
        </mask>
        <g mask="url(#mask0_1046_155)">
          <path d="M11.2141 0.00645943C11.1625 0.0111515 10.9982 0.0275738 10.8504 0.039304C7.44164 0.346635 4.24868 2.18593 2.22639 5.01291C1.10029 6.58476 0.380059 8.36775 0.107918 10.2563C0.0117302 10.9156 0 11.1103 0 12.0041C0 12.898 0.0117302 13.0927 0.107918 13.7519C0.760117 18.2587 3.96716 22.0452 8.31672 23.4481C9.0956 23.6991 9.91672 23.8704 10.8504 23.9736C11.2141 24.0135 12.7859 24.0135 13.1496 23.9736C14.7613 23.7953 16.1267 23.3965 17.4733 22.7091C17.6798 22.6035 17.7196 22.5754 17.6915 22.5519C17.6727 22.5378 16.793 21.3578 15.7372 19.9314L13.8182 17.339L11.4135 13.7801C10.0903 11.8235 9.00176 10.2235 8.99238 10.2235C8.98299 10.2211 8.97361 11.8024 8.96891 13.7331C8.96188 17.1138 8.95953 17.2499 8.9173 17.3296C8.85631 17.4446 8.80938 17.4915 8.71085 17.5431C8.63578 17.5807 8.57009 17.5877 8.21584 17.5877H7.80997L7.70205 17.5197C7.63167 17.4751 7.58006 17.4164 7.54487 17.3484L7.4956 17.2428L7.50029 12.539L7.50733 7.83285L7.58006 7.74136C7.6176 7.69209 7.69736 7.62875 7.75367 7.59825C7.84985 7.55133 7.88739 7.54664 8.29325 7.54664C8.77185 7.54664 8.85161 7.5654 8.97595 7.70147C9.01114 7.73901 10.3132 9.7003 11.871 12.0628C13.4287 14.4252 15.5589 17.651 16.6053 19.2346L18.5056 22.1132L18.6018 22.0499C19.4534 21.4962 20.3543 20.7079 21.0674 19.8868C22.5853 18.1437 23.5636 16.0182 23.8921 13.7519C23.9883 13.0927 24 12.898 24 12.0041C24 11.1103 23.9883 10.9156 23.8921 10.2563C23.2399 5.74957 20.0328 1.96306 15.6833 0.560125C14.9161 0.311445 14.0997 0.140184 13.1848 0.036958C12.9595 0.0134976 11.4088 -0.0123089 11.2141 0.00645943ZM16.1267 7.26511C16.2393 7.32142 16.3308 7.42933 16.3636 7.54194C16.3824 7.60294 16.3871 8.90734 16.3824 11.8469L16.3754 16.0651L15.6317 14.9249L14.8856 13.7848V10.7185C14.8856 8.73608 14.895 7.62171 14.9091 7.56775C14.9466 7.43637 15.0287 7.33315 15.1413 7.27215C15.2375 7.22288 15.2727 7.21819 15.6411 7.21819C15.9883 7.21819 16.0493 7.22288 16.1267 7.26511Z" fill="black"/>
        </g>
      </g>
      <defs>
        <clipPath id="clip0_1046_155">
          <rect width="24" height="24" fill="white"/>
        </clipPath>
      </defs>
    </svg>
  ),
  react: () => (
    <svg 
      width="100" 
      height="100" 
      viewBox="0 0 100 100" 
      fill="none" 
      xmlns="http://www.w3.org/2000/svg"
      >
      <path d="M49.9167 58.3002C54.5375 58.3002 58.2834 54.5543 58.2834 49.9336C58.2834 45.3128 54.5375 41.5669 49.9167 41.5669C45.2959 41.5669 41.55 45.3128 41.55 49.9336C41.55 54.5543 45.2959 58.3002 49.9167 58.3002Z" fill="#00D8FF"/>
      <path d="M49.9166 69.0998C38.1666 69.0998 27.8999 67.7164 20.2166 65.0831C15.2333 63.3831 10.9999 61.1164 7.98325 58.5331C4.78325 55.7998 3.08325 52.8164 3.08325 49.9331C3.08325 44.3998 9.14992 38.9831 19.3333 35.4498C27.6666 32.5498 38.5333 30.9331 49.8999 30.9331C61.0666 30.9331 71.7833 32.4998 80.0666 35.3664C84.9166 37.0331 88.9999 39.1998 91.8999 41.5998C95.0499 44.2331 96.7166 47.1164 96.7166 49.9331C96.7166 55.6831 89.9333 61.4998 78.9999 65.1164C71.2666 67.6831 60.9333 69.0998 49.9166 69.0998ZM49.9166 34.9331C39.1333 34.9331 28.4666 36.4998 20.6666 39.2164C11.2999 42.4831 7.09992 46.9498 7.09992 49.9331C7.09992 53.0331 11.6166 57.9164 21.5166 61.2998C28.7833 63.7831 38.6166 65.0998 49.9166 65.0998C60.5166 65.0998 70.3999 63.7664 77.7499 61.3164C88.0333 57.8998 92.7333 53.0164 92.7333 49.9331C92.7333 48.3498 91.5333 46.4831 89.3499 44.6664C86.8333 42.5664 83.1666 40.6498 78.7833 39.1331C70.8999 36.4331 60.6499 34.9331 49.9166 34.9331Z" fill="#00D8FF"/>
      <path d="M30.9332 91.6332C29.2332 91.6332 27.7332 91.2666 26.4666 90.5333C21.6832 87.7666 20.0166 79.7999 22.0332 69.2166C23.6832 60.5332 27.7166 50.3332 33.3999 40.4832C38.9832 30.8166 45.6832 22.3166 52.2999 16.5666C56.1666 13.1999 60.0832 10.7332 63.6166 9.43324C67.4666 8.01658 70.7999 8.01658 73.2332 9.41658C78.2166 12.2832 79.8666 21.0832 77.5332 32.3499C75.8832 40.3499 71.9499 49.9999 66.4499 59.5499C60.5832 69.7166 54.2499 77.9166 48.1332 83.2666C44.1666 86.7333 40.0832 89.2666 36.3499 90.5832C34.3999 91.2832 32.5666 91.6332 30.9332 91.6332ZM35.1166 41.4832L36.8499 42.4832C31.4666 51.8166 27.4832 61.8332 25.9499 69.9666C24.0999 79.7166 25.8832 85.5833 28.4499 87.0666C29.0832 87.4333 29.9166 87.6332 30.9332 87.6332C34.2499 87.6332 39.4666 85.5333 45.4999 80.2666C51.2832 75.2166 57.3332 67.3499 62.9832 57.5666C68.2832 48.3832 72.0499 39.1499 73.6166 31.5666C75.7999 20.9499 73.9166 14.4499 71.2332 12.8999C69.8666 12.1166 67.6499 12.2166 64.9832 13.1999C61.8999 14.3332 58.4166 16.5499 54.9166 19.5999C48.6332 25.0666 42.2166 33.1999 36.8499 42.4999L35.1166 41.4832Z" fill="#00D8FF"/>
      <path d="M68.8999 91.6832C64.3665 91.6832 58.6165 88.9499 52.6165 83.7832C45.9165 78.0165 39.0999 69.4332 33.3999 59.5832C27.7999 49.9165 23.7999 39.8665 22.1165 31.2499C21.1332 26.2165 20.9499 21.5999 21.5832 17.8832C22.2832 13.8332 23.9332 10.9499 26.3832 9.5332C31.3499 6.64987 39.7999 9.61654 48.3999 17.2665C54.4999 22.6832 60.8999 30.9165 66.4165 40.4499C72.2999 50.6165 76.2499 60.1999 77.8165 68.1665C78.8332 73.3332 78.9999 78.1332 78.2832 82.0332C77.5165 86.1832 75.7832 89.1332 73.2832 90.5832C72.0332 91.3165 70.5499 91.6832 68.8999 91.6832ZM36.8665 57.5832C42.2665 66.9165 48.9665 75.3665 55.2332 80.7499C62.7499 87.2165 68.7165 88.6165 71.2999 87.1165C73.9832 85.5665 75.9499 79.2165 73.9165 68.9499C72.4165 61.4165 68.6332 52.2499 62.9665 42.4665C57.6499 33.2832 51.5332 25.3999 45.7499 20.2665C37.6499 13.0665 31.0832 11.4499 28.3999 12.9999C27.0332 13.7832 26.0165 15.7665 25.5332 18.5665C24.9832 21.7999 25.1499 25.9332 26.0499 30.4832C27.6499 38.6665 31.4832 48.2832 36.8665 57.5832Z" fill="#00D8FF"/>
    </svg>
  ),
  github: () => (
    <svg 
      width="100" 
      height="100" 
      viewBox="0 0 100 100" 
      fill="none" 
      xmlns="http://www.w3.org/2000/svg"
      >
      <path fillRule="evenodd" clipRule="evenodd" d="M50 6.25C25.8398 6.25 6.25 26.3281 6.25 51.1133C6.25 70.9375 18.7891 87.7344 36.1719 93.6719C38.3594 94.082 39.1602 92.6953 39.1602 91.5039C39.1602 90.4297 39.1211 87.6172 39.1016 83.8672C26.9336 86.582 24.3555 77.8516 24.3555 77.8516C22.3633 72.6758 19.4922 71.2891 19.4922 71.2891C15.5273 68.4961 19.7852 68.5547 19.7852 68.5547C24.1797 68.8672 26.4844 73.1836 26.4844 73.1836C30.3906 80.0391 36.7188 78.0664 39.2188 76.9141C39.6094 74.0234 40.7422 72.0313 41.9922 70.918C32.2852 69.7852 22.0703 65.9375 22.0703 48.75C22.0703 43.8477 23.7695 39.8438 26.5625 36.7188C26.1133 35.5859 24.6094 31.0156 26.9922 24.8438C26.9922 24.8438 30.6641 23.6328 39.0234 29.4336C42.5195 28.4375 46.25 27.9492 49.9805 27.9297C53.6914 27.9492 57.4414 28.4375 60.9375 29.4336C69.2969 23.6328 72.9492 24.8438 72.9492 24.8438C75.332 31.0156 73.8281 35.5859 73.3789 36.7188C76.1719 39.8633 77.8711 43.8672 77.8711 48.75C77.8711 65.9766 67.6367 69.7656 57.8906 70.8789C59.4531 72.2656 60.8594 75 60.8594 79.1797C60.8594 85.1758 60.8008 90.0195 60.8008 91.4844C60.8008 92.6758 61.582 94.082 63.8086 93.6328C81.2305 87.7148 93.75 70.918 93.75 51.1133C93.75 26.3281 74.1602 6.25 50 6.25Z" fill="black"/>
    </svg>
  ),
};
